{# 
=====================================================================
 VISTA: Recuperación de contraseña
 UBICACIÓN: templates/security/recuperar_password.html.twig
---------------------------------------------------------------------
 Esta vista muestra un formulario donde el usuario escribe:
   - Su correo registrado
   - Su puesto
   - Su departamento

El controlador valida esos datos y, si son correctos, llama al servicio
RecuperarPassword, que genera un password temporal, lo guarda,
y envía el correo al usuario.

La vista solo SE MUESTRA. No contiene lógica compleja.
=====================================================================
#}

{# Extendemos la plantilla base del proyecto (layout general) #}
{% extends 'base.html.twig' %}

{# Título que aparece en el <title> del navegador #}
{% block title %}Recuperar contraseña{% endblock %}

{% block body %}

{# 
=====================================================================
 CONTENEDOR PRINCIPAL
 Usamos flexbox para centrar vertical y horizontalmente el formulario.
=====================================================================
#}
<div class="container d-flex justify-content-center align-items-center"
     style="min-height: 80vh;">

    {# 
    --------------------------------------------------------------
    TARJETA DEL FORMULARIO
    - Sombra
    - Fondo oscuro para adaptarse al tema del sistema
    - Bordes redondeados
    --------------------------------------------------------------
    #}
    <div class="card shadow-lg p-4"
         style="max-width: 450px; width: 100%;
                background:#1f242b; color:white; border-radius:10px;">

        {# Título principal de la vista #}
        <h3 class="text-center mb-3">Recuperar contraseña</h3>

        {# Texto breve explicando qué debe hacer el usuario #}
        <p class="text-center text-secondary mb-4">
            Ingresa tus datos para validar tu identidad.
        </p>

        {# 
        --------------------------------------------------------------
        MENSAJE DE ERROR (SOLO SE MUESTRA SI EL CONTROLADOR LO ENVÍA)
        --------------------------------------------------------------
        #}
        {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
        {% endif %}

        {# 
        --------------------------------------------------------------
        MENSAJE DE ÉXITO (SOLO SE MUESTRA SI EL CONTROLADOR LO ENVÍA)
        --------------------------------------------------------------
        #}
        {% if mensaje %}
            <div class="alert alert-success">
                {{ mensaje }}
            </div>
        {% endif %}

        {# 
        ==============================================================
        FORMULARIO DE RECUPERACIÓN
        - Método POST porque enviamos datos sensibles
        - NO usamos {{ form() }} para tener control absoluto del diseño
        ==============================================================
        #}
        <form method="post">

            {# CAMPO: CORREO #}
            <div class="mb-3">
                <label class="form-label">Correo electrónico</label>

                {# 
                INPUT donde el usuario escribe el correo.
                Debe coincidir exactamente con el de Personal.correo
                #}
                <input type="email"
                       name="email"
                       class="form-control"
                       required
                       placeholder="ejemplo@correo.com">
            </div>

            {# CAMPO: PUESTO #}
            <div class="mb-3">
                <label class="form-label">Puesto</label>

                {# 
                INPUT de puesto.
                Se compara con Personal.puesto.nombre en el controlador
                #}
                <input type="text"
                       name="puesto"
                       class="form-control"
                       required
                       placeholder="Ej: Obrero general">
            </div>

            {# CAMPO: DEPARTAMENTO #}
            <div class="mb-3">
                <label class="form-label">Departamento</label>

                {# 
                INPUT de departamento.
                Se compara con Personal.departamento.nombre
                #}
                <input type="text"
                       name="departamento"
                       class="form-control"
                       required
                       placeholder="Ej: Producción">
            </div>

            {# BOTÓN PARA ENVIAR EL FORMULARIO #}
            <button type="submit"
                    class="btn btn-primary w-100 mt-3">
                Recuperar contraseña
            </button>

            {# Enlace de retorno al login #}
            <div class="text-center mt-3">
                <a href="{{ path('app_login') }}" class="text-info">
                    Regresar al login
                </a>
            </div>

        </form>
    </div>
</div>

{% endblock %}
